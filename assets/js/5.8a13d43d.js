(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{332:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"环境配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境配置"}},[s._v("#")]),s._v(" 环境配置")]),s._v(" "),a("p",[s._v("本文参考自"),a("a",{attrs:{href:"https://docs.celeryproject.org/en/stable/django/first-steps-with-django.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Celery官方文档"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Python包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Django")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".7\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("celery")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v(".5\ndjango-celery-results"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.0")]),s._v(".1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 消息代理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RabbitMQ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.8")]),s._v(".14\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"step1-新建django项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step1-新建django项目"}},[s._v("#")]),s._v(" Step1 新建django项目")]),s._v(" "),a("p",[s._v("我的django项目结构如下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" w@w-Vulcan-Series:~/PycharmProjects/beer_server$ tree "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"venv|migrations|__pycache__"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── apps\n│   ├── config\n│   │   ├── admin.py\n│   │   ├── apps.py\n│   │   ├── __init__.py\n│   │   ├── models.py\n│   │   ├── serializers.py\n│   │   ├── tests.py\n│   │   ├── urls.py\n│   │   └── views.py\n│   ├── __init__.py\n│   ├── project\n│   │   ├── admin.py\n│   │   ├── apps.py\n│   │   ├── __init__.py\n│   │   ├── models.py\n│   │   ├── serializers.py\n│   │   ├── tests.py\n│   │   ├── urls.py\n│   │   └── views.py\n│   ├── testcase\n│   │   ├── admin.py\n│   │   ├── apps.py\n│   │   ├── __init__.py\n│   │   ├── models.py\n│   │   ├── serializers.py\n│   │   ├── tasks.py\n│   │   ├── tests.py\n│   │   ├── urls.py\n│   │   └── views.py\n│   ├── testsuite\n│   │   ├── admin.py\n│   │   ├── apps.py\n│   │   ├── __init__.py\n│   │   ├── models.py\n│   │   ├── serializers.py\n│   │   ├── tests.py\n│   │   ├── urls.py\n│   │   └── views.py\n│   └── user\n│       ├── admin.py\n│       ├── apps.py\n│       ├── __init__.py\n│       ├── models.py\n│       ├── serializers.py\n│       ├── tests.py\n│       ├── urls.py\n│       └── views.py\n├── beer_server\n│   ├── asgi.py\n│   ├── celery.py\n│   ├── __init__.py\n│   ├── settings.py\n│   ├── urls.py\n│   └── wsgi.py\n├── LICENSE\n├── manage.py\n├── README.md\n├── requirements.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br")])]),a("h2",{attrs:{id:"step2-安装消息代理服务rabbitmq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step2-安装消息代理服务rabbitmq"}},[s._v("#")]),s._v(" Step2 安装消息代理服务RabbitMQ")]),s._v(" "),a("p",[s._v("我这里为了演示使用docker启动一个RabbitMQ容器")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" ramq "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5672")]),s._v(":5672 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15672")]),s._v(":15672 rabbitmq:management "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启rabbitmq的mqtt协议插件(端口1883)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name ramq -p 5672:5672 -p 15672:15672 -p 1883:1883 -v /home/w/rabbitmq:/var/lib/rabbitmq rabbitmq:management && docker ps")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("容器启动后，默认已经开启了"),a("code",[s._v("RabbitMQ")]),s._v("的"),a("code",[s._v("Web")]),s._v("管理界面服务。")]),s._v(" "),a("h3",{attrs:{id:"进入容器开启rabbitmq的web管理界面服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入容器开启rabbitmq的web管理界面服务"}},[s._v("#")]),s._v(" 进入容器开启RabbitMQ的Web管理界面服务")]),s._v(" "),a("p",[s._v("可选步骤，如果未开启Web服务则需要执行这一步骤")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入ramq容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" ramq /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启web管理服务")]),s._v("\nrabbitmq-plugins "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" rabbitmq_management\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("此时访问"),a("code",[s._v("http://127.0.0.1:15672/#/")]),s._v(" 就可以看到RabbitMQ的登录页面了，账号和密码默认都是"),a("code",[s._v("guest")]),s._v("，登录后就可以看到如下页面了")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/hashqueue/blog-image-hosting@master/images/image-082cd90707e6481ea91d8633ab44398d.png",alt:"image.png"}})]),s._v(" "),a("h2",{attrs:{id:"step3-pip3安装celery包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step3-pip3安装celery包"}},[s._v("#")]),s._v(" Step3 pip3安装Celery包")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("pip3 install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("pypi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("douban"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("simple celery\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"step4-在项目settings-py同级目录下新建celery-py文件-文件内容如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step4-在项目settings-py同级目录下新建celery-py文件-文件内容如下"}},[s._v("#")]),s._v(" Step4 在项目settings.py同级目录下新建celery.py文件，文件内容如下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("import os\n\nfrom celery import Celery\n\n# set the default Django settings module for the 'celery' program.\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'beer_server.settings')\n\napp = Celery('beer_server')\n\n# Using a string here means the worker doesn't have to serialize\n# the configuration object to child processes.\n# - namespace='CELERY' means all celery-related configuration keys\n#   should have a `CELERY_` prefix.\napp.config_from_object('django.conf:settings', namespace='CELERY')\n\n# Load task modules from all registered Django app configs.\napp.autodiscover_tasks()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"step5-在项目settings-py同级目录下的-init-py文件内写入如下内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step5-在项目settings-py同级目录下的-init-py文件内写入如下内容"}},[s._v("#")]),s._v(" Step5 在项目settings.py同级目录下的__init__.py文件内写入如下内容")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This will make sure the app is always imported when")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Django starts so that shared_task will use this app.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("celery "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" app "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" celery_app\n\n__all__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'celery_app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"step6-新建一个测试任务模块-apps目录下的testcase目录下新建tasks-py文件-eg-apps-testcase-tasks-py-内容如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step6-新建一个测试任务模块-apps目录下的testcase目录下新建tasks-py文件-eg-apps-testcase-tasks-py-内容如下"}},[s._v("#")]),s._v(" Step6 新建一个测试任务模块:apps目录下的testcase目录下新建tasks.py文件(eg:apps/testcase/tasks.py)，内容如下")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" celery "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" shared_task\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" testcase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("models "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" TestCase\n\n\n"),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@shared_task")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" y\n\n\n"),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@shared_task")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("count_testcases")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" TestCase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"step7-安装django-celery-results包-使用django-orm作为结果后端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step7-安装django-celery-results包-使用django-orm作为结果后端"}},[s._v("#")]),s._v(" Step7 安装django-celery-results包，使用Django ORM作为结果后端")]),s._v(" "),a("h3",{attrs:{id:"安装django-celery-results"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装django-celery-results"}},[s._v("#")]),s._v(" 安装django_celery_results")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" https://pypi.douban.com/simple django-celery-results\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"在settings-py文件中的installed-apps列表中添加django-celery-results"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在settings-py文件中的installed-apps列表中添加django-celery-results"}},[s._v("#")]),s._v(" 在settings.py文件中的INSTALLED_APPS列表中添加django_celery_results")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("INSTALLED_APPS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.auth'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.contenttypes'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.sessions'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.messages'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.staticfiles'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rest_framework'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django_celery_results'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"进行数据迁移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进行数据迁移"}},[s._v("#")]),s._v(" 进行数据迁移")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("python3 manage.py migrate django_celery_results\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"然后在settings-py文件中添加如下内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#然后在settings-py文件中添加如下内容"}},[s._v("#")]),s._v(" 然后在settings.py文件中添加如下内容")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Celery配置选项")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置时区,使用与django项目相同的时区设置")]),s._v("\nCELERY_TIMEZONE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" TIME_ZONE\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 异步任务运行结果使用django自带的ORM来存储")]),s._v("\nCELERY_RESULT_BACKEND "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django-db'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"step8-启动celery任务队列服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step8-启动celery任务队列服务"}},[s._v("#")]),s._v(" Step8 启动Celery任务队列服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" w@w-Vulcan-Series:~/PycharmProjects/beer_server$ celery "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-A")]),s._v(" beer_server worker "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" INFO\n \n -------------- celery@w-Vulcan-Series v5.0.5 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("singularity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n--- ***** ----- \n-- ******* ---- Linux-5.4.0-60-generic-x86_64-with-glibc2.29 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":21:07\n- *** --- * --- \n- ** ---------- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n- ** ---------- ."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" app:         beer_server:0x7f62b67dcfa0\n- ** ---------- ."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" transport:   amqp://guest:**@localhost:5672//\n- ** ---------- ."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" results:     \n- *** --- * --- ."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" concurrency: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prefork"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n-- ******* ---- ."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" task events: OFF "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("enable "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-E")]),s._v(" to monitor tasks "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" this worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n--- ***** ----- \n -------------- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("queues"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                ."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" celery           "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("exchange")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("celery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("direct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("celery\n                \n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" testcase.tasks.add\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" testcase.tasks.count_testcases\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":21:07,357: INFO/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Connected to amqp://guest:**@127.0.0.1:5672//\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":21:07,367: INFO/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" mingle: searching "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" neighbors\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":21:08,394: INFO/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" mingle: all alone\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":21:08,410: WARNING/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" /home/w/PycharmProjects/beer_server/venv/lib/python3.8/site-packages/celery/fixups/django.py:203: UserWarning: Using settings.DEBUG leads to a memory\n            leak, never use this setting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" production environments"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n  warnings.warn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("'Using settings.DEBUG leads to a memory\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":21:08,411: INFO/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" celery@w-Vulcan-Series ready.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h2",{attrs:{id:"step9-使用django-shell对celery服务进行测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step9-使用django-shell对celery服务进行测试"}},[s._v("#")]),s._v(" Step9 使用django shell对Celery服务进行测试")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("venv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" w@w-Vulcan-Series:~/PycharmProjects/beer_server$ python3 manage.py shell\nPython "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.8")]),s._v(".5 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default, Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":41:15"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GCC "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.3")]),s._v(".0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on linux\nType "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"help"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"copyright"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"credits"')]),s._v(" or "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("InteractiveConsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" from testcase.tasks "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" count_testcases, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" print"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count_testcases.delay"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\n57bdf093-a6ff-4846-acd9-cacc83a3f513\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" print"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("add.delay"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")]),s._v("\nf8125941-2887-4590-9e63-02f61e353690\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"celery服务运行的日志如下-可以看到已经正常接收到这两个异步任务-并执行完成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#celery服务运行的日志如下-可以看到已经正常接收到这两个异步任务-并执行完成"}},[s._v("#")]),s._v(" Celery服务运行的日志如下，可以看到已经正常接收到这两个异步任务，并执行完成")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":21:08,411: INFO/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" celery@w-Vulcan-Series ready.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":23:44,528: INFO/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Received task: testcase.tasks.count_testcases"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("57bdf093-a6ff-4846-acd9-cacc83a3f513"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":23:44,555: INFO/ForkPoolWorker-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Task testcase.tasks.count_testcases"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("57bdf093-a6ff-4846-acd9-cacc83a3f513"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" succeeded "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".025395925000339048s: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":23:57,057: INFO/MainProcess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Received task: testcase.tasks.add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("f8125941-2887-4590-9e63-02f61e353690"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-04-26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":23:57,075: INFO/ForkPoolWorker-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Task testcase.tasks.add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("f8125941-2887-4590-9e63-02f61e353690"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" succeeded "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".017471159000706393s: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"查看django-celery-results-taskresult表-可以看到运行成功的异步任务的执行记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看django-celery-results-taskresult表-可以看到运行成功的异步任务的执行记录"}},[s._v("#")]),s._v(" 查看django_celery_results_taskresult表，可以看到运行成功的异步任务的执行记录")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/hashqueue/blog-image-hosting@master/images/image-965f97d99fe043b69623792e5b1ca05b.png",alt:"image.png"}})]),s._v(" "),a("h2",{attrs:{id:"end"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#end"}},[s._v("#")]),s._v(" end!")])])}),[],!1,null,null,null);a.default=e.exports}}]);