(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{327:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"代码如下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码如下"}},[t._v("#")]),t._v(" 代码如下")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Example")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__enter__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'哈哈哈'")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__exit__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exc_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exc_val"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exc_tb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exit!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" get_data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" exp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h3",{attrs:{id:"程序执行后输出结果如下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#程序执行后输出结果如下"}},[t._v("#")]),t._v(" 程序执行后输出结果如下")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/hashqueue/blog-image-hosting@master/images/image-bba64818eae64d52b9e395f19d82a06e.png",alt:"image.png"}})]),t._v(" "),s("h2",{attrs:{id:"解释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解释"}},[t._v("#")]),t._v(" 解释")]),t._v(" "),s("h3",{attrs:{id:"with语句的原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#with语句的原理"}},[t._v("#")]),t._v(" with语句的原理")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("上下文管理协议(Context Management Protocol)")]),t._v(" "),s("ul",[s("li",[t._v("包含方法"),s("code",[t._v("__enter__()")]),t._v("和"),s("code",[t._v("__exit__()")]),t._v("，支持该协议的对象要实现这两个方法。")])])]),t._v(" "),s("li",[s("code",[t._v("上下文管理器(Context Manager)")]),t._v(" "),s("ul",[s("li",[t._v("支持上下文管理协议的对象，这种对象实现了"),s("code",[t._v("__enter__()")]),t._v("和"),s("code",[t._v("__exit__()")]),t._v("方法。上下文管理器定义执行"),s("code",[t._v("with")]),t._v("语句时要建立的运行时上下文，负责执行"),s("code",[t._v("with")]),t._v("语句块上下文中的"),s("code",[t._v("进入")]),t._v("与"),s("code",[t._v("退出")]),t._v("操作。通常使用"),s("code",[t._v("with")]),t._v("语句调用上下文管理器，也可以通过直接调用其方法来使用。")])])])]),t._v(" "),s("h3",{attrs:{id:"自定义上下文管理器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义上下文管理器"}},[t._v("#")]),t._v(" 自定义上下文管理器")]),t._v(" "),s("p",[t._v("如上代码就是一个自定义的上下文管理器。")]),t._v(" "),s("ol",[s("li",[t._v("执行"),s("code",[t._v("get_data()")]),t._v("会生成上下文管理器"),s("code",[t._v("context_manager")])]),t._v(" "),s("li",[s("code",[t._v("with")]),t._v("后面必须跟一个上下文管理器，如果使用了"),s("code",[t._v("as")]),t._v("，则是把上下文管理器的"),s("code",[t._v("__enter__()")]),t._v("方法的返回值赋值给"),s("code",[t._v("exp")])]),t._v(" "),s("li",[t._v("当我们使用with的时候,"),s("code",[t._v("__enter__()")]),t._v("方法被调用，并且将返回值赋值给"),s("code",[t._v("as")]),t._v("后面的变量，并且在退出"),s("code",[t._v("with")]),t._v("的时候自动执行"),s("code",[t._v("__exit__()")]),t._v("方法")])])])}),[],!1,null,null,null);s.default=e.exports}}]);